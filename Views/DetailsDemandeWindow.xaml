<Window x:Class="BacklogManager.Views.DetailsDemandeWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DÃ©tails de la demande" Height="900" Width="750" 
        WindowStartupLocation="CenterOwner" Background="#F5F5F5">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- En-tÃªte enrichi -->
        <Border Grid.Row="0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#00A651" Offset="0"/>
                    <GradientStop Color="#00915A" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Grid Margin="25,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="ðŸ“‹" FontSize="32" 
                          VerticalAlignment="Center" Margin="0,0,15,0"/>
                
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock Text="DÃ‰TAILS DE LA DEMANDE" FontSize="20" 
                              FontWeight="Bold" Foreground="White"/>
                    <TextBlock x:Name="TxtHeaderSubtitle" FontSize="12" 
                              Foreground="#E0F2E9" Margin="0,3,0,0"/>
                </StackPanel>
                
                <Border Grid.Column="2" x:Name="BadgeStatut" 
                       CornerRadius="15" Padding="15,8" 
                       VerticalAlignment="Center">
                    <TextBlock x:Name="TxtStatutBadge" FontSize="12" 
                              FontWeight="Bold" Foreground="White"/>
                </Border>
            </Grid>
        </Border>
        
        <!-- Contenu -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="30,20">
                
                <!-- Titre -->
                <Border Background="White" CornerRadius="8" Padding="20" Margin="0,0,0,15">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.1" Color="#000000"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="ðŸ“Œ TITRE DE LA DEMANDE" FontSize="11" 
                                  Foreground="#00A651" FontWeight="Bold" Margin="0,0,0,8"/>
                        <TextBlock x:Name="TxtTitre" FontSize="18" FontWeight="Bold" 
                                  Foreground="#1A1919" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>
                
                <!-- Description -->
                <Border Background="White" CornerRadius="8" Padding="20" Margin="0,0,0,15">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.1" Color="#000000"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="ðŸ“ DESCRIPTION" FontSize="11" 
                                  Foreground="#00A651" FontWeight="Bold" Margin="0,0,0,8"/>
                        <TextBlock x:Name="TxtDescription" FontSize="13" 
                                  Foreground="#555555" TextWrapping="Wrap" LineHeight="20"/>
                    </StackPanel>
                </Border>
                
                <!-- Infos de base -->
                <Border Background="White" CornerRadius="8" Padding="20" Margin="0,0,0,15">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.1" Color="#000000"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="â„¹ï¸ INFORMATIONS GÃ‰NÃ‰RALES" FontSize="11" 
                                  Foreground="#00A651" FontWeight="Bold" Margin="0,0,0,15"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <StackPanel Grid.Row="0" Grid.Column="0">
                            <TextBlock Text="TYPE" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtType" FontSize="13" FontWeight="Bold"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Row="0" Grid.Column="1">
                            <TextBlock Text="CRITICITÃ‰" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtCriticite" FontSize="13" FontWeight="Bold"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Row="2" Grid.Column="0">
                            <TextBlock Text="STATUT" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtStatut" FontSize="13" FontWeight="Bold" Foreground="#00A651"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Row="2" Grid.Column="1">
                            <TextBlock Text="DATE CRÃ‰ATION" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtDateCreation" FontSize="13"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2">
                            <TextBlock Text="ðŸ“… DATE PRÃ‰VISIONNELLE" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtDatePrev" FontSize="13"/>
                        </StackPanel>
                    </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Contexte -->
                <Border Background="White" CornerRadius="8" Padding="20" Margin="0,0,0,15">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.1" Color="#000000"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="ðŸ¬ CONTEXTE MÃ‰TIER" FontSize="11" 
                                  Foreground="#00A651" FontWeight="Bold" Margin="0,0,0,8"/>
                        <TextBlock x:Name="TxtContexte" FontSize="13" 
                                  Foreground="#555555" TextWrapping="Wrap" LineHeight="20"/>
                    </StackPanel>
                </Border>
                
                <!-- BÃ©nÃ©fices -->
                <Border Background="White" CornerRadius="8" Padding="20" Margin="0,0,0,15">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.1" Color="#000000"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="âœ¨ BÃ‰NÃ‰FICES ATTENDUS" FontSize="11" 
                                  Foreground="#00A651" FontWeight="Bold" Margin="0,0,0,8"/>
                        <TextBlock x:Name="TxtBenefices" FontSize="13" 
                                  Foreground="#555555" TextWrapping="Wrap" LineHeight="20"/>
                    </StackPanel>
                </Border>
                
                <!-- Intervenants -->
                <Border Background="White" CornerRadius="8" Padding="20" Margin="0,0,0,15">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.1" Color="#000000"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="ðŸ‘¥ INTERVENANTS" FontSize="11" 
                                  Foreground="#00A651" FontWeight="Bold" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Demandeur:" FontWeight="Bold"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" x:Name="TxtDemandeur"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Business Analyst:" FontWeight="Bold"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" x:Name="TxtBA"/>
                            
                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Chef de Projet:" FontWeight="Bold"/>
                            <TextBlock Grid.Row="4" Grid.Column="1" x:Name="TxtCP"/>
                            
                            <TextBlock Grid.Row="6" Grid.Column="0" Text="DÃ©veloppeur:" FontWeight="Bold"/>
                            <TextBlock Grid.Row="6" Grid.Column="1" x:Name="TxtDev"/>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Chiffrage -->
                <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                       CornerRadius="5" Padding="15" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="CHIFFRAGE" FontSize="13" FontWeight="Bold" 
                                  Foreground="#00A651" Margin="0,0,0,10"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Estimation:" FontWeight="Bold" Margin="0,0,10,0"/>
                            <TextBlock x:Name="TxtChiffrage"/>
                            <TextBlock Text=" heures" Margin="3,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- SECTION PROGRAMME ET CLASSIFICATION -->
                <Border BorderBrush="#4CAF50" BorderThickness="2" CornerRadius="8" Padding="20" Margin="0,0,0,15" Background="White">
                    <StackPanel>
                        <TextBlock Text="PROGRAMME ET CLASSIFICATION" FontSize="14" FontWeight="Bold" 
                                  Foreground="#4CAF50" Margin="0,0,0,15"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="15"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="15"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Programme -->
                            <StackPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2">
                                <TextBlock Text="PROGRAMME" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                                <TextBlock x:Name="TxtProgramme" FontSize="13" FontWeight="Bold"/>
                            </StackPanel>
                            
                            <!-- PrioritÃ©, Type, CatÃ©gorie -->
                            <StackPanel Grid.Row="2" Grid.Column="0">
                                <TextBlock Text="PRIORITÃ‰" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                                <TextBlock x:Name="TxtPriorite" FontSize="13" FontWeight="Bold"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="2" Grid.Column="1">
                                <TextBlock Text="TYPE PROJET" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                                <TextBlock x:Name="TxtTypeProjet" FontSize="13"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="4" Grid.Column="0">
                                <TextBlock Text="CATÃ‰GORIE" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                                <TextBlock x:Name="TxtCategorie" FontSize="13"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Row="4" Grid.Column="1">
                                <TextBlock Text="LEAD PROJET" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                                <TextBlock x:Name="TxtLeadProjet" FontSize="13"/>
                            </StackPanel>
                        </Grid>
                        
                        <StackPanel Margin="0,15,0,0">
                            <TextBlock Text="IMPLÃ‰MENTÃ‰" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtEstImplemente" FontSize="13" FontWeight="Bold"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- SECTION DRIVERS ET AMBITION -->
                <Border BorderBrush="#2196F3" BorderThickness="2" CornerRadius="8" Padding="20" Margin="0,0,0,15" Background="White">
                    <StackPanel>
                        <TextBlock Text="DRIVERS ET AMBITION" FontSize="14" FontWeight="Bold" 
                                  Foreground="#2196F3" Margin="0,0,0,15"/>
                        
                        <StackPanel Margin="0,0,0,15">
                            <TextBlock Text="DRIVERS" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtDrivers" FontSize="13" TextWrapping="Wrap" Margin="0,5,0,0"/>
                        </StackPanel>
                        
                        <StackPanel Margin="0,0,0,15">
                            <TextBlock Text="AMBITION" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtAmbition" FontSize="13" Margin="0,5,0,0"/>
                        </StackPanel>
                        
                        <StackPanel>
                            <TextBlock Text="BÃ‰NÃ‰FICIAIRES" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtBeneficiaires" FontSize="13" TextWrapping="Wrap" Margin="0,5,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- SECTION GAINS ATTENDUS -->
                <Border BorderBrush="#FF9800" BorderThickness="2" CornerRadius="8" Padding="20" Margin="0,0,0,15" Background="White">
                    <StackPanel>
                        <TextBlock Text="GAINS ATTENDUS" FontSize="14" FontWeight="Bold" 
                                  Foreground="#FF9800" Margin="0,0,0,15"/>
                        
                        <StackPanel Margin="0,0,0,15">
                            <TextBlock Text="GAINS TEMPS" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtGainsTemps" FontSize="13" TextWrapping="Wrap" Margin="0,5,0,0"/>
                        </StackPanel>
                        
                        <StackPanel>
                            <TextBlock Text="GAINS FINANCIERS" FontSize="10" Foreground="#999999" FontWeight="Bold"/>
                            <TextBlock x:Name="TxtGainsFinanciers" FontSize="13" TextWrapping="Wrap" Margin="0,5,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- Section 4: Ã‰quipes AssignÃ©es -->
                <Border Background="#F3E5F5" BorderBrush="#9C27B0" BorderThickness="2" 
                       CornerRadius="6" Padding="20" Margin="0,0,0,20" x:Name="BorderEquipes">
                    <StackPanel>
                        <TextBlock Text="ðŸ¢ Ã‰QUIPES ASSIGNÃ‰ES" FontSize="14" FontWeight="Bold" 
                                  Foreground="#7B1FA2" Margin="0,0,0,15"/>
                        
                        <ItemsControl x:Name="ListeEquipes">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="#9C27B0" CornerRadius="4" Padding="12,6" Margin="0,0,8,8">
                                        <TextBlock Text="{Binding Nom}" FontSize="12" Foreground="White" FontWeight="SemiBold"/>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <TextBlock x:Name="TxtAucuneEquipe" Text="Aucune Ã©quipe assignÃ©e" 
                                   FontSize="12" Foreground="#999" FontStyle="Italic" 
                                   Visibility="Collapsed"/>
                    </StackPanel>
                </Border>
                
            </StackPanel>
        </ScrollViewer>
        
        <!-- Bouton -->
        <Border Grid.Row="2" Background="White" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0" 
               Padding="20">
            <Button Content="Fermer" Width="100" Height="35" 
                   Background="#00A651" Foreground="White" BorderThickness="0" 
                   FontSize="13" FontWeight="Bold" Cursor="Hand"
                   HorizontalAlignment="Right" Click="OnFermer"/>
        </Border>
    </Grid>
</Window>
