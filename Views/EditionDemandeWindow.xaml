<Window x:Class="BacklogManager.Views.EditionDemandeWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Nouvelle demande" Height="650" Width="700" 
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        Background="#F5F5F5">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- En-tÃªte -->
        <Border Grid.Row="0" Background="#00A651" Padding="20">
            <StackPanel>
                <TextBlock x:Name="TxtTitre" Text="NOUVELLE DEMANDE" FontSize="20" 
                          FontWeight="Bold" Foreground="White"/>
                <TextBlock Text="Formulaire de crÃ©ation/modification de demande" 
                          FontSize="12" Foreground="White" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>
        
        <!-- Formulaire -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="30,20">
                
                <!-- Titre -->
                <TextBlock Text="Titre *" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox x:Name="TxtTitreDemande" Height="35" FontSize="13" 
                        Padding="8" Margin="0,0,0,15"/>
                
                <!-- Description -->
                <TextBlock Text="Description *" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox x:Name="TxtDescription" Height="100" FontSize="13" 
                        TextWrapping="Wrap" AcceptsReturn="True" 
                        VerticalScrollBarVisibility="Auto" Padding="8" Margin="0,0,0,15"/>
                
                <!-- SpÃ©cifications (visible uniquement en modification) -->
                <Border x:Name="PanelSpecifications" Background="#FFF9E6" BorderBrush="#FFD700" 
                       BorderThickness="1" CornerRadius="5" Padding="15" Margin="0,0,0,15"
                       Visibility="Collapsed">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBlock Text="ðŸ“‹ SPÃ‰CIFICATIONS DÃ‰TAILLÃ‰ES" FontWeight="Bold" FontSize="14" 
                                      Foreground="#FF8C00" VerticalAlignment="Center"/>
                            <Button x:Name="BtnValiderSpecifications" Content="âœ“ Valider et passer au chiffrage" 
                                   Height="30" Margin="20,0,0,0" Background="#00915A" Foreground="White" 
                                   BorderThickness="0" FontSize="11" FontWeight="Bold" Cursor="Hand"
                                   Padding="10,0"/>
                        </StackPanel>
                        
                        <TextBlock Text="DÃ©finissez les spÃ©cifications fonctionnelles et techniques de la demande" 
                                  Foreground="#666666" FontSize="11" Margin="0,0,0,5"/>
                        <TextBox x:Name="TxtSpecifications" Height="150" FontSize="13" 
                                TextWrapping="Wrap" AcceptsReturn="True" 
                                VerticalScrollBarVisibility="Auto" Padding="8"/>
                    </StackPanel>
                </Border>
                
                <!-- Type et CriticitÃ© -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Type *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="CmbType" Height="35" FontSize="13"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="CriticitÃ© *" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="CmbCriticite" Height="35" FontSize="13"/>
                    </StackPanel>
                </Grid>
                
                <!-- Contexte -->
                <TextBlock Text="Contexte mÃ©tier" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox x:Name="TxtContexte" Height="80" FontSize="13" 
                        TextWrapping="Wrap" AcceptsReturn="True" 
                        VerticalScrollBarVisibility="Auto" Padding="8" Margin="0,0,0,15"/>
                
                <!-- BÃ©nÃ©fices attendus -->
                <TextBlock Text="BÃ©nÃ©fices attendus" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBox x:Name="TxtBenefices" Height="80" FontSize="13" 
                        TextWrapping="Wrap" AcceptsReturn="True" 
                        VerticalScrollBarVisibility="Auto" Padding="8" Margin="0,0,0,15"/>
                
                <!-- Business Analyst -->
                <TextBlock Text="Business Analyst" FontWeight="Bold" Margin="0,0,0,5"/>
                <ComboBox x:Name="CmbBusinessAnalyst" Height="35" FontSize="13" Margin="0,0,0,15"/>
                
                <!-- Chef de Projet -->
                <TextBlock Text="Chef de Projet / PO" FontWeight="Bold" Margin="0,0,0,5"/>
                <ComboBox x:Name="CmbChefProjet" Height="35" FontSize="13" Margin="0,0,0,15"/>
                
                <!-- Section chiffrage (visible uniquement en modification) -->
                <Border x:Name="PanelChiffrage" Background="White" BorderBrush="#E0E0E0" 
                       BorderThickness="1" CornerRadius="5" Padding="15" Margin="0,0,0,15"
                       Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="CHIFFRAGE" FontWeight="Bold" FontSize="14" 
                                  Foreground="#00A651" Margin="0,0,0,10"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="DÃ©veloppeur chiffreur" FontWeight="Bold" Margin="0,0,0,5"/>
                                <ComboBox x:Name="CmbDevChiffreur" Height="35" FontSize="13"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Estimation (jours)" FontWeight="Bold" Margin="0,0,0,5"/>
                                <TextBox x:Name="TxtChiffrageEstime" Height="35" FontSize="13" Padding="8"
                                        ToolTip="Exemples: 1 = 1 jour, 0.5 = demi-journÃ©e, 2.5 = 2 jours et demi"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Section arbitrage (visible pour Admin/Chef de Projet si demande en attente d'arbitrage) -->
                <Border x:Name="PanelArbitrage" Background="#FFF3E0" BorderBrush="#FF9800" 
                       BorderThickness="2" CornerRadius="5" Padding="15" Margin="0,0,0,15"
                       Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock Text="âš–ï¸ ARBITRAGE DE LA DEMANDE" FontWeight="Bold" FontSize="14" 
                                  Foreground="#FF6B00" Margin="0,0,0,10"/>
                        
                        <TextBlock Text="Cette demande est en attente d'arbitrage. DÃ©cidez d'accepter ou de refuser la demande." 
                                  Foreground="#666666" FontSize="12" Margin="0,0,0,10" TextWrapping="Wrap"/>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                            <Button x:Name="BtnAccepter" Content="âœ“ Accepter la demande" 
                                   Height="40" Padding="15,0" Background="#4CAF50" Foreground="White" 
                                   BorderThickness="0" FontSize="13" FontWeight="Bold" Cursor="Hand" Margin="0,0,10,0"/>
                            <Button x:Name="BtnRefuser" Content="âœ— Refuser la demande" 
                                   Height="40" Padding="15,0" Background="#F44336" Foreground="White" 
                                   BorderThickness="0" FontSize="13" FontWeight="Bold" Cursor="Hand"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- Message d'erreur -->
                <TextBlock x:Name="TxtErreur" Foreground="Red" FontWeight="Bold" 
                          TextWrapping="Wrap" Visibility="Collapsed" Margin="0,0,0,10"/>
                
            </StackPanel>
        </ScrollViewer>
        
        <!-- Boutons -->
        <Border Grid.Row="2" Background="White" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0" 
               Padding="20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="BtnAnnuler" Content="Annuler" Width="100" Height="35" 
                       Margin="0,0,10,0" Background="#E0E0E0" Foreground="#333333" 
                       BorderThickness="0" FontSize="13" FontWeight="Bold" Cursor="Hand"/>
                <Button x:Name="BtnEnregistrer" Content="Enregistrer" Width="120" Height="35" 
                       Background="#00A651" Foreground="White" BorderThickness="0" 
                       FontSize="13" FontWeight="Bold" Cursor="Hand"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
