<Page x:Class="BacklogManager.Views.Pages.GestionProjetsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="Transparent">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Actions Ã©lÃ©gantes -->
        <Border Grid.Row="0" Background="White" CornerRadius="10" Padding="18" Margin="0,0,0,20">
            <Border.Effect>
                <DropShadowEffect Color="#E0E0E0" BlurRadius="10" ShadowDepth="2" Opacity="0.2" Direction="270"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                <Button Click="BtnNouveauProjet_Click"
                        Background="#00915A" Foreground="White" Padding="18,10" 
                        BorderThickness="0" Cursor="Hand" FontWeight="Bold" FontSize="13">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                            <Border.Effect>
                                                <DropShadowEffect Color="#00915A" BlurRadius="8" ShadowDepth="0" Opacity="0.3"/>
                                            </Border.Effect>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="âž•" FontSize="14" Margin="0,0,6,0"/>
                                                <TextBlock Text="Nouveau projet" FontSize="13" FontWeight="Bold"/>
                                            </StackPanel>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
                <Button Click="BtnModifierProjet_Click" Margin="10,0,0,0"
                        Background="#1976D2" Foreground="White" Padding="18,10" 
                        BorderThickness="0" Cursor="Hand" FontWeight="Bold" FontSize="13">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="âœï¸" FontSize="14" Margin="0,0,6,0"/>
                                                <TextBlock Text="Modifier" FontSize="13" FontWeight="Bold"/>
                                            </StackPanel>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
                <Button Click="BtnActualiser_Click" Margin="10,0,0,0"
                        Background="#F5F5F5" Foreground="#1A1919" Padding="18,10" 
                        BorderThickness="1" BorderBrush="#E0E0E0" Cursor="Hand" FontWeight="Bold" FontSize="13">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}" CornerRadius="8" Padding="{TemplateBinding Padding}"
                                                BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="ðŸ”„" FontSize="14" Margin="0,0,6,0"/>
                                                <TextBlock Text="Actualiser" FontSize="13" FontWeight="Bold"/>
                                            </StackPanel>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Afficher :" FontSize="13" FontWeight="SemiBold" 
                               Foreground="#1A1919" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <ComboBox x:Name="CmbFiltreStatut" Width="150" Padding="10,8" 
                              FontSize="13" SelectedIndex="0"
                              SelectionChanged="CmbFiltreStatut_SelectionChanged">
                        <ComboBoxItem Content="ðŸ“‚ Projets actifs"/>
                        <ComboBoxItem Content="ðŸ“¦ Projets archivÃ©s"/>
                        <ComboBoxItem Content="ðŸ“ Tous les projets"/>
                    </ComboBox>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Liste projets moderne -->
        <Border Grid.Row="1" Background="White" CornerRadius="12" BorderThickness="0">
            <Border.Effect>
                <DropShadowEffect Color="#E0E0E0" BlurRadius="12" ShadowDepth="2" Opacity="0.2" Direction="270"/>
            </Border.Effect>
            <DataGrid x:Name="LstProjets" AutoGenerateColumns="False" 
                      IsReadOnly="True" CanUserAddRows="False" SelectionMode="Single"
                      HeadersVisibility="Column" GridLinesVisibility="None"
                      BorderThickness="0" RowHeight="50"
                      AlternatingRowBackground="#FAFAFA" RowBackground="White"
                      Margin="20"
                      MouseDoubleClick="LstProjets_MouseDoubleClick">
                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="#F5F5F5"/>
                        <Setter Property="Foreground" Value="#1A1919"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="FontSize" Value="13"/>
                        <Setter Property="Padding" Value="15,12"/>
                        <Setter Property="BorderThickness" Value="0,0,0,2"/>
                        <Setter Property="BorderBrush" Value="#E0E0E0"/>
                    </Style>
                </DataGrid.ColumnHeaderStyle>
                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Padding" Value="15,10"/>
                        <Setter Property="FontSize" Value="13"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="DataGridCell">
                                    <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}">
                                        <ContentPresenter VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </DataGrid.CellStyle>
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ðŸ†” ID" Binding="{Binding Id}" Width="80" FontWeight="SemiBold"/>
                    <DataGridTextColumn Header="ðŸ“ Nom du projet" Binding="{Binding Nom}" Width="*" FontWeight="SemiBold"/>
                    <DataGridTextColumn Header="ðŸ“ Description" Binding="{Binding Description}" Width="250"/>
                    <DataGridTextColumn Header="ðŸ“… Date dÃ©but" Binding="{Binding DateDebut, StringFormat=dd/MM/yyyy}" Width="130"/>
                    <DataGridTextColumn Header="ðŸ Date fin prÃ©vue" Binding="{Binding DateFinPrevue, StringFormat=dd/MM/yyyy}" Width="150"/>
                    <DataGridTemplateColumn Header="âœ… Statut" Width="130">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Border x:Name="StatusBadge" CornerRadius="12" Padding="10,5" HorizontalAlignment="Center">
                                    <TextBlock x:Name="StatusText" FontWeight="Bold" FontSize="11" TextAlignment="Center"/>
                                </Border>
                                <DataTemplate.Triggers>
                                    <DataTrigger Binding="{Binding Actif}" Value="True">
                                        <Setter TargetName="StatusBadge" Property="Background" Value="#E8F5E9"/>
                                        <Setter TargetName="StatusText" Property="Foreground" Value="#00915A"/>
                                        <Setter TargetName="StatusText" Property="Text" Value="âœ… Actif"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Actif}" Value="False">
                                        <Setter TargetName="StatusBadge" Property="Background" Value="#FFE0B2"/>
                                        <Setter TargetName="StatusText" Property="Foreground" Value="#E65100"/>
                                        <Setter TargetName="StatusText" Property="Text" Value="ðŸ“¦ ArchivÃ©"/>
                                    </DataTrigger>
                                </DataTemplate.Triggers>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</Page>
