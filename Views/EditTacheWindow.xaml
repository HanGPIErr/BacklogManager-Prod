<Window x:Class="BacklogManager.Views.EditTacheWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:BacklogManager.Domain"
        Title="Ã‰dition de tÃ¢che" Height="750" Width="550"
        WindowStartupLocation="CenterOwner"
        Background="#F5F5F5">
    
    <Window.Resources>
        <local:EnumToCollectionConverter x:Key="EnumToCollectionConverter"/>
    </Window.Resources>
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="âœï¸ Modification de la tÃ¢che" FontSize="20" FontWeight="Bold" 
                   Foreground="#1A1919" Margin="0,0,0,20"/>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <TextBlock Text="Titre *" FontWeight="SemiBold" Margin="0,5,0,2" FontSize="13"/>
                <TextBox x:Name="TitreTextBox" Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1"/>

                <TextBlock Text="Description" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <TextBox x:Name="DescriptionTextBox" Padding="10" FontSize="14" Height="100" TextWrapping="Wrap" 
                         AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                         BorderBrush="#CCCCCC" BorderThickness="1"/>

                <TextBlock Text="Type de demande" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <ComboBox x:Name="TypeDemandeComboBox" 
                          ItemsSource="{Binding Source={x:Type local:TypeDemande}, Converter={StaticResource EnumToCollectionConverter}}"
                          Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1"/>

                <TextBlock Text="PrioritÃ©" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <ComboBox x:Name="PrioriteComboBox"
                          ItemsSource="{Binding Source={x:Type local:Priorite}, Converter={StaticResource EnumToCollectionConverter}}"
                          Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1"/>

                <TextBlock Text="Statut" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <ComboBox x:Name="StatutComboBox"
                          ItemsSource="{Binding Source={x:Type local:Statut}, Converter={StaticResource EnumToCollectionConverter}}"
                          Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1"/>

                <TextBlock Text="Dev AssignÃ©" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <ComboBox x:Name="DevComboBox" DisplayMemberPath="Nom" SelectedValuePath="Id"
                          Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1"/>

                <TextBlock Text="Projet" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <ComboBox x:Name="ProjetComboBox" DisplayMemberPath="Nom" SelectedValuePath="Id"
                          Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1"/>

                <TextBlock Text="Chiffrage (jours)" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <TextBox x:Name="ChiffrageTextBox" Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1"
                         ToolTip="Estimation initiale en jours (1j = 8h)"/>

                <TextBlock x:Name="DateDebutLabel" Text="Date de dÃ©but" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <DatePicker x:Name="DateDebutDatePicker" Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1"/>

                <TextBlock Text="Temps rÃ©el passÃ© (calculÃ© automatiquement)" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <StackPanel Orientation="Horizontal">
                    <TextBox x:Name="TempsReelTextBox" Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1" Width="150"
                             IsReadOnly="True" Background="#F5F5F5"
                             ToolTip="Nombre de jours rÃ©ellement passÃ©s sur cette tÃ¢che (calculÃ© depuis les CRA)"/>
                    <TextBlock Text="j" FontSize="14" VerticalAlignment="Center" Margin="8,0,0,0" Foreground="#666"/>
                    <TextBlock x:Name="ProgressionTextBlock" FontSize="12" VerticalAlignment="Center" Margin="15,0,0,0" 
                               Foreground="#00915A" FontWeight="SemiBold"/>
                </StackPanel>

                <TextBlock Text="Date de livraison attendue" FontWeight="SemiBold" Margin="0,15,0,2" FontSize="13"/>
                <DatePicker x:Name="DateFinDatePicker" Padding="10" FontSize="14" BorderBrush="#CCCCCC" BorderThickness="1"/>
            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="ðŸ’¾ Enregistrer" Click="Enregistrer_Click"
                    Padding="20,10" Background="#00915A" Foreground="White"
                    BorderThickness="0" FontSize="14" FontWeight="SemiBold" Cursor="Hand" Margin="0,0,10,0">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="4" 
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#007A4D"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <Button Content="âŒ Annuler" Click="Annuler_Click"
                    Padding="20,10" Background="#E0E0E0" Foreground="#333"
                    BorderThickness="0" FontSize="14" FontWeight="SemiBold" Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="4" 
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#D0D0D0"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </StackPanel>
    </Grid>
</Window>
